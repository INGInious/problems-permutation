var PermutationTaskUI=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=3)}([function(t,e,i){(function(t){var n,r,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(o,a){var h;if("object"===s(t)&&t.exports){try{h=i(1)}catch(t){}t.exports=a("Muuri",h)}else n=[i(1)],void 0===(r=function(t){return a("Muuri",t)}.apply(e,n))||(t.exports=r)}("undefined"!=typeof window&&window,function(t,e,i){"use strict";var n,r,o=window,a=o.Object,h=o.Array,l=o.Math,u=o.Error,d=o.Element,c=o.document,f=c.documentElement,p=c.body,m="function",g="string",_="number",v=function(){var t=null,e=[],n={},r=(o.requestAnimationFrame||o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame||o.msRequestAnimationFrame||function(t){return o.setTimeout(t,16)}).bind(o);function s(){var o,a=+k._maxRafBatchSize||100,h=e.splice(0,l.min(a,e.length)),u={};for(t=null,o=0;o<h.length;o++)u[h[o]]=n[h[o]],n[h[o]]=i;for(o=0;o<h.length;o++)u[h[o]][0]();for(o=0;o<h.length;o++)u[h[o]][1]();!t&&e.length&&(t=r(s))}return{add:function(i,o,a,h){var l=e.indexOf(i+o);l>-1&&e.splice(l,1);i===w||i===D?e.unshift(i+o):e.push(i+o),n[i+o]=[a,h],!t&&(t=r(s))},cancel:function(t,r){var s=e.indexOf(t+r);s>-1&&(e.splice(s,1),n[t+r]=i)}}}(),y="visibility",w="move",D="scroll",b=0,I=1,E=2,S=3,T={},C={},A=function(){},x=0,P=(n=d.prototype,r=n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector,function(t,e){return r.call(t,e)}),H=function(t){var e,n,r,s=t.charAt(0).toUpperCase()+t.slice(1),o=["","Webkit","Moz","O","ms"];for(r=0;r<o.length;r++)if(n=(e=o[r])?e+s:t,f.style[n]!==i)return{prefix:e=e.toLowerCase(),propName:n,styleName:e?"-"+e+"-"+t:t};return null}("transform"),R=p?ct():null,O="layoutEnd",L="showStart",N="showEnd",X="hideStart",Y="hideEnd";function k(t,e){var i,n,r,a,l,d,f=this;if(p||(p=document.body,R=ct()),t=f._element=(void 0===t?"undefined":s(t))===g?c.querySelector(t):t,!p.contains(t))throw new u("Container element must be an existing DOM element");i=f._settings=(a=k.defaultOptions,l=e,d=$({},a),(d=l?$(d,l):d).visibleStyles=(l||{}).visibleStyles||(a||{}).visibleStyles,d.hiddenStyles=(l||{}).hiddenStyles||(a||{}).hiddenStyles,d),s(i.dragSort)!==m&&(i.dragSort=!!i.dragSort),T[f._id=++x]=f,f._isDestroyed=!1,f._layout=null,f._emitter=new k.Emitter,f._itemShowHandler=vt("show",i),f._itemHideHandler=vt("hide",i),st(t,i.containerClass),f._items=[],(void 0===(n=i.items)?"undefined":s(n))===g?at(f._element.children).forEach(function(t){("*"===n||P(t,n))&&f._items.push(new k.Item(f,t))}):(h.isArray(n)||Q(n))&&(f._items=at(n).map(function(t){return new k.Item(f,t)})),(r=!0===(r=i.layoutOnResize)?0:(void 0===r?"undefined":s(r))===_?r:-1)>=0&&o.addEventListener("resize",f._resizeHandler=J(function(){f.refreshItems().layout()},r)),i.layoutOnInit&&f.layout(!0)}function M(t,e){var i,n=t._settings;this._id=++x,C[this._id]=this,this._isDestroyed=!1,e.parentNode!==t._element&&t._element.appendChild(e),st(e,n.itemClass),st(e,(i="none"===K(e,"display"))?n.itemHiddenClass:n.itemVisibleClass),this._gridId=t._id,this._element=e,this._child=e.children[0],this._animate=new k.ItemAnimate(this,e),this._animateChild=new k.ItemAnimate(this,this._child),this._isActive=!i,this._isPositioning=!1,this._isHidden=i,this._isHiding=!1,this._isShowing=!1,this._visibilityQueue=[],this._layoutQueue=[],this._left=0,this._top=0,rt(e,{left:"0",top:"0",transform:it(0,0),display:i?"none":"block"}),this._refreshDimensions()._refreshSortData(),i?t._itemHideHandler.start(this,!0):t._itemShowHandler.start(this,!0),this._migrate=new k.ItemMigrate(this),this._release=new k.ItemRelease(this),this._drag=n.dragEnabled?new k.ItemDrag(this):null}function G(){this._events={},this._isDestroyed=!1}function z(t,e){this._item=t,this._element=e,this._animation=null,this._propsTo=null,this._isDestroyed=!1}function F(t){this._itemId=t._id,this._isDestroyed=!1,this.isActive=!1,this.container=!1,this.containerDiffX=0,this.containerDiffY=0}function W(t){this._itemId=t._id,this._isDestroyed=!1,this.isActive=!1,this.isPositioningStarted=!1,this.containerDiffX=0,this.containerDiffY=0}function j(i){if(!e)throw new u("["+t+"] required dependency Hammer is not defined.");var n,r,o=this,a=i._element,h=i.getGrid(),l=h._settings,d=s(l.dragStartPredicate)===m?l.dragStartPredicate:j.defaultStartPredicate,c=b;o._itemId=i._id,o._gridId=h._id,o._hammer=n=new e.Manager(a),o._isDestroyed=!1,o._isMigrating=!1,o._data={},o._resolveStartPredicate=function(t){o._isDestroyed||c!==I||(c=E,o.onStart(t))},o._scrollListener=function(t){o.onScroll(t)},o._checkSortOverlap=J(function(){o._data.isActive&&o.checkOverlap()},l.dragSortInterval),o._sortPredicate=s(l.dragSortPredicate)===m?l.dragSortPredicate:j.defaultSortPredicate,o.reset(),n.add(new e.Pan({event:"drag",pointers:1,threshold:0,direction:e.DIRECTION_ALL})),n.add(new e.Press({event:"draginit",pointers:1,threshold:1e3,time:0})),U(l.dragHammerSettings)&&n.set(l.dragHammerSettings),n.on("draginit dragstart dragmove",function(t){c===b&&(c=I),c===I?!0===(r=d(o.getItem(),t))?(c=E,o.onStart(t)):!1===r&&(c=S):c===E&&o._data.isActive&&o.onMove(t)}).on("dragend dragcancel draginitup",function(t){var e=c===E;d(o.getItem(),t),c=b,e&&o._data.isActive&&o.onEnd(t)}),a.addEventListener("dragstart",Dt,!1)}function V(t,e,i){var n=t.length,r=l.max(0,i?n:n-1);return e>r?r:e<0?l.max(r+e+1,0):e}function q(t,e,i){if(!(t.length<2)){var n,r=V(t,e),s=V(t,i);r!==s&&(n=t[r],t[r]=t[s],t[s]=n)}}function B(t,e,i){if(!(t.length<2)){var n=V(t,e),r=V(t,i);n!==r&&t.splice(r,0,t.splice(n,1)[0])}}function U(t){return"object"===(void 0===t?"undefined":s(t))&&"[object Object]"===a.prototype.toString.call(t)}function Q(t){var e=a.prototype.toString.call(t);return"[object HTMLCollection]"===e||"[object NodeList]"===e}function $(t,e){return a.keys(e).forEach(function(i){var n=U(e[i]);U(t[i])&&n?(t[i]=$({},t[i]),t[i]=$(t[i],e[i])):t[i]=n?$({},e[i]):h.isArray(e[i])?e[i].concat():e[i]}),t}function Z(t,e,i){var n=(void 0===i?"undefined":s(i))===_?i:-1;t.splice.apply(t,[n<0?t.length-n+1:n,0].concat(e))}function J(t,e){var n;return e>0?function(r){n!==i&&(n=o.clearTimeout(n),"finish"===r&&t()),"cancel"!==r&&"finish"!==r&&(n=o.setTimeout(function(){n=i,t()},e))}:function(e){"cancel"!==e&&t()}}function K(t,e){return o.getComputedStyle(t,null).getPropertyValue("transform"===e&&H.styleName||e)}function tt(t,e){return parseFloat(K(t,e))||0}function et(t,e){return parseFloat((K(t,"transform")||"").replace("matrix(","").split(",")["x"===e?4:5])||0}function it(t,e){return"translateX("+t+"px) translateY("+e+"px)"}function nt(t,e){var i,n={},r=a.keys(e);for(i=0;i<r.length;i++)n[r[i]]=K(t,r[i].replace(/([A-Z])/g,"-$1").toLowerCase());return n}function rt(t,e){var i,n=a.keys(e);for(i=0;i<n.length;i++)t.style["transform"===n[i]&&H?H.propName:n[i]]=e[n[i]]}function st(t,e){t.classList?t.classList.add(e):P(t,"."+e)||(t.className+=" "+e)}function ot(t,e){t.classList?t.classList.remove(e):P(t,"."+e)&&(t.className=(" "+t.className+" ").replace(" "+e+" "," ").trim())}function at(t){return[].slice.call(t)}function ht(t,e,i){if(t===e)return{left:0,top:0};i&&(t=ut(t,!0),e=ut(e,!0));var n=lt(t,!0),r=lt(e,!0);return{left:r.left-n.left,top:r.top-n.top}}function lt(t,e){var i,n={left:0,top:0};return t===c?n:(n.left=o.pageXOffset||0,n.top=o.pageYOffset||0,t.self===o.self?n:(i=t.getBoundingClientRect(),n.left+=i.left,n.top+=i.top,e&&(n.left+=tt(t,"border-left-width"),n.top+=tt(t,"border-top-width")),n))}function ut(t,e){for(var i=(e?t:t.parentElement)||c;i&&i!==c&&"static"===K(i,"position")&&!ft(i);)i=i.parentElement||c;return i}function dt(t){var e=[],i=/(auto|scroll)/,n=t.parentNode;if(R){if("fixed"===K(t,"position"))return e;for(;n&&n!==c&&n!==f;)i.test(K(n,"overflow")+K(n,"overflow-y")+K(n,"overflow-x"))&&e.push(n),n="fixed"===K(n,"position")?null:n.parentNode;null!==n&&e.push(o)}else{for(;n&&n!==c;)"fixed"!==K(t,"position")||ft(n)?(i.test(K(n,"overflow")+K(n,"overflow-y")+K(n,"overflow-x"))&&e.push(n),t=n,n=n.parentNode):n=n.parentNode;e[e.length-1]===f?e[e.length-1]=o:e.push(o)}return e}function ct(){if(!H)return!0;var t=[0,1].map(function(t,e){return rt(t=c.createElement("div"),{position:e?"fixed":"absolute",display:"block",visibility:"hidden",left:e?"0px":"1px",transform:"none"}),t}),e=p.appendChild(t[0]),i=e.appendChild(t[1]),n=i.getBoundingClientRect().left;rt(e,{transform:"scale(1)"});var r=n===i.getBoundingClientRect().left;return p.removeChild(e),r}function ft(t){var e=K(t,"transform"),i=K(t,"display");return"none"!==e&&"inline"!==i&&"none"!==i}function pt(t,e){return Et.doRectsOverlap(t,e)?(l.min(t.left+t.width,e.left+e.width)-l.max(t.left,e.left))*(l.min(t.top+t.height,e.top+e.height)-l.max(t.top,e.top))/(l.min(t.width,e.width)*l.min(t.height,e.height))*100:0}function mt(t){var e,i={};for(e=0;e<t.length;e++)i[t[e]._id]=e;return i}function gt(t,e,i,n){var r=n[t._id],s=n[e._id];return i?s-r:r-s}function _t(t,e,n,r){var o,a,h=t.getItems(n),l=r||{},u=!0===l.instant,d=l.onFinish,c=l.layout?l.layout:l.layout===i,f=h.length,p="show"===e,g=p?L:X,_=p?N:Y,v=!1,y=[],w=[];if(f){for(t._emit(g,h.concat()),a=0;a<h.length;a++)o=h[a],(p&&!o._isActive||!p&&o._isActive)&&(v=!0),p&&!o._isActive&&(o._skipNextLayoutAnimation=!0),p&&o._isHidden&&w.push(o),o["_"+e](u,function(e,i){e||y.push(i),--f<1&&((void 0===d?"undefined":s(d))===m&&d(y.concat()),t._emit(_,y.concat()))});w.length&&t.refreshItems(w),v&&c&&t.layout("instant"===c,(void 0===c?"undefined":s(c))===m?c:i)}else(void 0===d?"undefined":s(d))===m&&d(h);return t}function vt(t,e){var i,n="show"===t,r=parseInt(n?e.showDuration:e.hideDuration)||0,s=(n?e.showEasing:e.hideEasing)||"ease",o=n?e.visibleStyles:e.hiddenStyles,a=r>0;return o=U(o)?o:null,{start:function(t,e,n){o?(v.cancel(y,t._id),!a||e?(t._animateChild.isAnimating()?t._animateChild.stop(o):rt(t._child,o),n&&n()):v.add(y,t._id,function(){i=nt(t._child,o)},function(){t._animateChild.start(i,o,{duration:r,easing:s,onFinish:n})})):n&&n()},stop:function(t,e){v.cancel(y,t._id),t._animateChild.stop(e)}}}function yt(t,e,i){var n,r=t.splice(0,t.length);for(n=0;n<r.length;n++)r[n](e,i)}function wt(t,e){var i;return"inactive"===e?!t.isActive():"hidden"===e?!t.isVisible():(i="is"+e.charAt(0).toUpperCase()+e.slice(1),s(t[i])===m&&t[i]())}function Dt(t){t.preventDefault&&t.preventDefault()}function bt(t,e){var i,n,r,s,a=t._drag._startPredicateData,h=e.changedPointers[0],l=h&&h.pageX||0,u=h&&h.pageY||0;if(!(e.distance<a.distance||a.delay))return i=a.handleElement.getBoundingClientRect(),It(t),n=l,r=u,(s={width:i.width,height:i.height,left:i.left+(o.pageXOffset||0),top:i.top+(o.pageYOffset||0)}).width&&s.height&&n>=s.left&&n<s.left+s.width&&r>=s.top&&r<s.top+s.height}function It(t){var e=t._drag._startPredicateData;e&&(e.delayTimer&&(e.delayTimer=o.clearTimeout(e.delayTimer)),t._drag._startPredicateData=null)}function Et(t,e,i,n){var r,s,o,h,u,d,c,f=!!n.fillGaps,p=!!n.horizontal,m=!!n.alignRight,g=!!n.alignBottom,_=!!n.rounding,v={slots:{},width:p?0:_?l.round(e):e,height:p?_?l.round(i):i:0,setWidth:p,setHeight:!p},y=[];if(!t.length)return v;for(c=0;c<t.length;c++)u=(h=t[c])._width+h._margin.left+h._margin.right,d=h._height+h._margin.top+h._margin.bottom,_&&(u=l.round(u),d=l.round(d)),o=(s=Et.getSlot(v,y,u,d,!p,f))[0],y=s[1],p?v.width=l.max(v.width,o.left+o.width):v.height=l.max(v.height,o.top+o.height),v.slots[h._id]=o;if(m||g)for(r=a.keys(v.slots),c=0;c<r.length;c++)o=v.slots[r[c]],m&&(o.left=v.width-(o.left+o.width)),g&&(o.top=v.height-(o.top+o.height));return v}return k.Item=M,k.ItemDrag=j,k.ItemRelease=W,k.ItemMigrate=F,k.ItemAnimate=z,k.Layout=function(t,e){var i=t._settings.layout;e=e.concat(),t._refreshDimensions();var n=t._width-t._border.left-t._border.right,r=t._height-t._border.top-t._border.bottom,o=(void 0===i?"undefined":s(i))===m?i(e,n,r):Et(e,n,r,U(i)?i:{});this.slots=o.slots,this.setWidth=o.setWidth||!1,this.setHeight=o.setHeight||!1,this.width=o.width,this.height=o.height},k.Emitter=G,k.defaultOptions={items:"*",showDuration:300,showEasing:"ease",hideDuration:300,hideEasing:"ease",visibleStyles:{opacity:"1",transform:"scale(1)"},hiddenStyles:{opacity:"0",transform:"scale(0.5)"},layout:{fillGaps:!1,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!0},layoutOnResize:100,layoutOnInit:!0,layoutDuration:300,layoutEasing:"ease",sortData:null,dragEnabled:!1,dragContainer:null,dragStartPredicate:{distance:0,delay:0,handle:!1},dragAxis:null,dragSort:!0,dragSortInterval:100,dragSortPredicate:{threshold:50,action:"move"},dragReleaseDuration:300,dragReleaseEasing:"ease",dragHammerSettings:{touchAction:"none"},containerClass:"muuri",itemClass:"muuri-item",itemVisibleClass:"muuri-item-shown",itemHiddenClass:"muuri-item-hidden",itemPositioningClass:"muuri-item-positioning",itemDraggingClass:"muuri-item-dragging",itemReleasingClass:"muuri-item-releasing"},k._maxRafBatchSize=100,k.prototype.on=function(t,e){return this._isDestroyed||this._emitter.on(t,e),this},k.prototype.once=function(t,e){return this._isDestroyed||this._emitter.once(t,e),this},k.prototype.off=function(t,e){return this._isDestroyed||this._emitter.off(t,e),this},k.prototype.getElement=function(){return this._element},k.prototype.getItems=function(t,e){if(this._isDestroyed)return[];var i,n,r=0===t||t&&(void 0===t?"undefined":s(t))!==g,o=r?Q(t)?at(t):[].concat(t):null,a=r?e:t,h=[];if((a=(void 0===a?"undefined":s(a))===g?a:null)||o){for(o=o||this._items,n=0;n<o.length;n++)!(i=r?this._getItem(o[n]):o[n])||a&&!wt(i,a)||h.push(i);return h}return h.concat(this._items)},k.prototype.refreshItems=function(t){if(this._isDestroyed)return this;var e,i=this.getItems(t||"active");for(e=0;e<i.length;e++)i[e]._refreshDimensions();return this},k.prototype.refreshSortData=function(t){if(this._isDestroyed)return this;var e,i=this.getItems(t);for(e=0;e<i.length;e++)i[e]._refreshSortData();return this},k.prototype.synchronize=function(){if(this._isDestroyed)return this;var t,e,i,n=this._element,r=this._items;if(r.length){for(i=0;i<r.length;i++)(e=r[i]._element).parentNode===n&&(t=t||c.createDocumentFragment()).appendChild(e);t&&n.appendChild(t)}return this._emit("synchronize"),this},k.prototype.layout=function(t,e){var i=this;if(i._isDestroyed)return i;var n,r,o,a,h,l=(void 0===t?"undefined":s(t))===m?t:e,u=!0===t,d=i.getItems("active"),c=i._layout=new k.Layout(i,d),f=d.length;function p(){--f<=0&&((void 0===l?"undefined":s(l))===m&&l(i._layout!==c,d.concat()),i._layout===c&&i._emit(O,d.concat()))}if((c.setWidth||c.setHeight)&&(r={},n="border-box"===K(i._element,"box-sizing"),c.setHeight&&(s(c.height)===_?r.height=(n?c.height+i._border.top+i._border.bottom:c.height)+"px":r.height=c.height),c.setWidth&&(s(c.width)===_?r.width=(n?c.width+i._border.left+i._border.right:c.width)+"px":r.width=c.width),rt(i._element,r)),i._emit("layoutStart",d.concat()),!d.length)return p(),i;for(h=0;h<d.length;h++)o=d[h],a=c.slots[o._id],o._left=a.left,o._top=a.top,o.isDragging()?p():o._layout(u,p);return i},k.prototype.add=function(t,e){if(this._isDestroyed)return[];var n=Q(t)?at(t):[].concat(t),r=[];if(!n.length)return r;var o,a,h,l=e||{},u=l.layout?l.layout:l.layout===i,d=this._items,c=!1;for(h=0;h<d.length;h++)if((o=n.indexOf(d[h]._element))>-1&&(n.splice(o,1),!n.length))return r;for(h=0;h<n.length;h++)a=new k.Item(this,n[h]),r.push(a),a._isActive&&(c=!0,a._skipNextLayoutAnimation=!0);return Z(d,r,l.index),this._emit("add",r.concat()),c&&u&&this.layout("instant"===u,(void 0===u?"undefined":s(u))===m?u:i),r},k.prototype.remove=function(t,e){if(this._isDestroyed)return this;var n,r,o=e||{},a=o.layout?o.layout:o.layout===i,h=!1,l=this.getItems(),u=this.getItems(t),d=[];for(r=0;r<u.length;r++)n=u[r],d.push(l.indexOf(n)),n._isActive&&(h=!0),n._destroy(o.removeElements);return this._emit("remove",u.concat(),d),h&&a&&this.layout("instant"===a,(void 0===a?"undefined":s(a))===m?a:i),u},k.prototype.show=function(t,e){return this._isDestroyed?this:_t(this,"show",t,e)},k.prototype.hide=function(t,e){return this._isDestroyed?this:_t(this,"hide",t,e)},k.prototype.filter=function(t,e){if(this._isDestroyed||!this._items.length)return this;var n,r,o=this._items,a=void 0===t?"undefined":s(t),h=a===g,l=a===m,u=e||{},d=!0===u.instant,c=u.layout?u.layout:u.layout===i,f=s(u.onFinish)===m?u.onFinish:null,p=[],_=[],v=-1,y=f?function(){++v&&f(p.concat(),_.concat())}:A;if(l||h)for(r=0;r<o.length;r++)n=o[r],(l?t(n):P(n._element,t))?p.push(n):_.push(n);return p.length?this.show(p,{instant:d,onFinish:y,layout:!1}):y(),_.length?this.hide(_,{instant:d,onFinish:y,layout:!1}):y(),(p.length||_.length)&&(this._emit("filter",p.concat(),_.concat()),c&&this.layout("instant"===c,(void 0===c?"undefined":s(c))===m?c:i)),this},k.prototype.sort=function(t,e){if(this._isDestroyed||this._items.length<2)return this;var n,r=this._items,o=e||{},a=!!o.descending,l=o.layout?o.layout:o.layout===i,u=r.concat();if((void 0===t?"undefined":s(t))===m)r.sort(function(e,i){var r=t(e,i);return(a&&0!==r?-r:r)||gt(e,i,a,n||(n=mt(u)))});else if((void 0===t?"undefined":s(t))===g)t=t.trim().split(" ").map(function(t){return t.split(":")}),r.sort(function(e,i){return function(t,e,i,n){var r,s,o,a,h,l=0;for(h=0;h<n.length;h++)if(r=n[h][0],s=n[h][1],o=(t._sortData?t:t._refreshSortData())._sortData[r],a=(e._sortData?e:e._refreshSortData())._sortData[r],0!==(l="desc"===s||!s&&i?a<o?-1:a>o?1:0:o<a?-1:o>a?1:0))return l;return l}(e,i,a,t)||gt(e,i,a,n||(n=mt(u)))});else{if(!h.isArray(t))return this;!function(t,e){var i,n,r,s=[],o=t.concat();for(r=0;r<e.length;r++)i=e[r],(n=o.indexOf(i))>-1&&(s.push(i),o.splice(n,1));t.splice.apply(t,[0,t.length].concat(s).concat(o))}(r,t),a&&r.reverse()}return this._emit("sort",r.concat(),u),l&&this.layout("instant"===l,(void 0===l?"undefined":s(l))===m?l:i),this},k.prototype.move=function(t,e,n){if(this._isDestroyed||this._items.length<2)return this;var r,o,a=this._items,h=n||{},l=h.layout?h.layout:h.layout===i,u="swap"===h.action,d=u?"swap":"move",c=this._getItem(t),f=this._getItem(e);return c&&f&&c!==f&&(r=a.indexOf(c),o=a.indexOf(f),(u?q:B)(a,r,o),this._emit("move",{item:c,fromIndex:r,toIndex:o,action:d}),l&&this.layout("instant"===l,(void 0===l?"undefined":s(l))===m?l:i)),this},k.prototype.send=function(t,e,n,r){if(this._isDestroyed||e._isDestroyed||this===e||!(t=this._getItem(t)))return this;var o=e,a=r||{},h=a.appendTo||p,l=a.layoutSender?a.layoutSender:a.layoutSender===i,u=a.layoutReceiver?a.layoutReceiver:a.layoutReceiver===i;return t._migrate.start(o,n,h),t._migrate.isActive&&t.isActive()&&(l&&this.layout("instant"===l,(void 0===l?"undefined":s(l))===m?l:i),u&&o.layout("instant"===u,(void 0===u?"undefined":s(u))===m?u:i)),this},k.prototype.destroy=function(t){if(this._isDestroyed)return this;var e,n=this._element,r=this._items.concat();for(this._resizeHandler&&o.removeEventListener("resize",this._resizeHandler),e=0;e<r.length;e++)r[e]._destroy(t);return ot(n,this._settings.containerClass),rt(n,{height:""}),this._emit("destroy"),this._emitter.destroy(),T[this._id]=i,this._isDestroyed=!0,this},k.prototype._getItem=function(t){var e,i=this._items;if(this._isDestroyed||!t)return i[0]||null;if((void 0===t?"undefined":s(t))===_)return i[t>-1?t:i.length+t]||null;if(t instanceof M)return t._gridId===this._id?t:null;for(e=0;e<i.length;e++)if(i[e]._element===t)return i[e];return null},k.prototype._emit=function(){return this._isDestroyed||this._emitter.emit.apply(this._emitter,arguments),this},k.prototype._refreshDimensions=function(){var t,e=this._element,i=e.getBoundingClientRect(),n=["left","right","top","bottom"];for(this._width=i.width,this._height=i.height,this._left=i.left,this._top=i.top,this._border={},t=0;t<n.length;t++)this._border[n[t]]=tt(e,"border-"+n[t]+"-width");return this},M.prototype.getGrid=function(){return T[this._gridId]},M.prototype.getElement=function(){return this._element},M.prototype.getWidth=function(){return this._width},M.prototype.getHeight=function(){return this._height},M.prototype.getMargin=function(){return{left:this._margin.left,right:this._margin.right,top:this._margin.top,bottom:this._margin.bottom}},M.prototype.getPosition=function(){return{left:this._left,top:this._top}},M.prototype.isActive=function(){return this._isActive},M.prototype.isVisible=function(){return!this._isHidden},M.prototype.isShowing=function(){return this._isShowing},M.prototype.isHiding=function(){return this._isHiding},M.prototype.isPositioning=function(){return this._isPositioning},M.prototype.isDragging=function(){return!!this._drag&&this._drag._data.isActive},M.prototype.isReleasing=function(){return this._release.isActive},M.prototype.isDestroyed=function(){return this._isDestroyed},M.prototype._refreshDimensions=function(){if(this._isDestroyed||this._isHidden)return this;var t,e,i=this._element,n=i.getBoundingClientRect(),r=["left","right","top","bottom"],s=this._margin=this._margin||{};for(this._width=n.width,this._height=n.height,e=0;e<4;e++)t=tt(i,"margin-"+r[e]),s[r[e]]=t>0?t:0;return this},M.prototype._refreshSortData=function(){var t=this;if(t._isDestroyed)return t;var e={},i=t.getGrid()._settings.sortData;return i&&a.keys(i).forEach(function(n){e[n]=i[n](t,t._element)}),t._sortData=e,t},M.prototype._layout=function(t,e){var i=this;if(i._isDestroyed)return i;var n,r,o,a,h,l,u=i._element,d=i._isPositioning,c=i._migrate,f=i._release,p=f.isActive&&!1===f.isPositioningStarted,g=i.getGrid()._settings,_=p?g.dragReleaseDuration:g.layoutDuration,y=p?g.dragReleaseEasing:g.layoutEasing,w=!t&&!i._skipNextLayoutAnimation&&_>0;return d&&yt(i._layoutQueue,!0,i),p&&(f.isPositioningStarted=!0),(void 0===e?"undefined":s(e))===m&&i._layoutQueue.push(e),r=f.isActive?f.containerDiffX:c.isActive?c.containerDiffX:0,o=f.isActive?f.containerDiffY:c.isActive?c.containerDiffY:0,l={transform:it(i._left+r,i._top+o)},w?(i._isPositioning=!0,v.add("layout",i._id,function(){a=et(u,"x")-r,h=et(u,"y")-o},function(){if(i._left===a&&i._top===h)return d&&i._stopLayout(!1,l),i._isPositioning=!1,i._finishLayout();!d&&st(u,g.itemPositioningClass),i._animate.start({transform:it(a+r,h+o)},l,{duration:_,easing:y,onFinish:function(){i._finishLayout()}})}),i):(d&&v.cancel("layout",i._id),n=i._animate.isAnimating(),i._stopLayout(!1,l),!n&&rt(u,l),i._skipNextLayoutAnimation=!1,i._finishLayout())},M.prototype._finishLayout=function(){return this._isDestroyed?this:(this._isPositioning&&(this._isPositioning=!1,ot(this._element,this.getGrid()._settings.itemPositioningClass)),this._release.isActive&&this._release.stop(),this._migrate.isActive&&this._migrate.stop(),yt(this._layoutQueue,!1,this),this)},M.prototype._stopLayout=function(t,e){return this._isDestroyed||!this._isPositioning?this:(v.cancel("layout",this._id),this._animate.stop(e),ot(this._element,this.getGrid()._settings.itemPositioningClass),this._isPositioning=!1,t&&yt(this._layoutQueue,!0,this),this)},M.prototype._show=function(t,e){var i=this;if(i._isDestroyed)return i;var n=i._element,r=i._visibilityQueue,o=(void 0===e?"undefined":s(e))===m?e:null,a=i.getGrid(),h=a._settings;return i._isShowing||i._isHidden?i._isShowing&&!t?(o&&r.push(o),i):(i._isShowing||(yt(r,!0,i),ot(n,h.itemHiddenClass),st(n,h.itemVisibleClass),!i._isHiding&&rt(n,{display:"block"})),o&&r.push(o),i._isActive=i._isShowing=!0,i._isHiding=i._isHidden=!1,t?(a._itemShowHandler.stop(i,h.visibleStyles),i._isShowing=!1,yt(r,!1,i)):a._itemShowHandler.start(i,t,function(){i._isHidden||(i._isShowing=!1,yt(r,!1,i))}),i):(o&&o(!1,i),i)},M.prototype._hide=function(t,e){var i=this;if(i._isDestroyed)return i;var n=i._element,r=i._visibilityQueue,o=(void 0===e?"undefined":s(e))===m?e:null,a=i.getGrid(),h=a._settings;return!i._isHiding&&i._isHidden?(o&&o(!1,i),i):i._isHiding&&!t?(o&&r.push(o),i):(i._isHiding||(yt(r,!0,i),st(n,h.itemHiddenClass),ot(n,h.itemVisibleClass)),o&&r.push(o),i._isHidden=i._isHiding=!0,i._isActive=i._isShowing=!1,t?(a._itemHideHandler.stop(i,h.hiddenStyles),i._isHiding=!1,i._stopLayout(!0,{transform:it(0,0)}),rt(n,{display:"none"}),yt(r,!1,i)):a._itemHideHandler.start(i,t,function(){i._isHidden&&(i._isHiding=!1,i._stopLayout(!0,{transform:it(0,0)}),rt(n,{display:"none"}),yt(r,!1,i))}),i)},M.prototype._destroy=function(t){if(this._isDestroyed)return this;var e=this._element,n=this.getGrid(),r=n._settings,s=n._items.indexOf(this);return this._release.destroy(),this._migrate.destroy(),this._stopLayout(!0,{}),n._itemShowHandler.stop(this,{}),n._itemHideHandler.stop(this,{}),this._drag&&this._drag.destroy(),this._animate.destroy(),this._animateChild.destroy(),yt(this._visibilityQueue,!0,this),e.removeAttribute("style"),this._child.removeAttribute("style"),ot(e,r.itemPositioningClass),ot(e,r.itemDraggingClass),ot(e,r.itemReleasingClass),ot(e,r.itemClass),ot(e,r.itemVisibleClass),ot(e,r.itemHiddenClass),s>-1&&n._items.splice(s,1),t&&e.parentNode.removeChild(e),C[this._id]=i,this._isActive=this._isPositioning=this._isHiding=this._isShowing=!1,this._isDestroyed=this._isHidden=!0,this},G.prototype.on=function(t,e){if(this._isDestroyed)return this;var i=this._events[t]||[];return i.push(e),this._events[t]=i,this},G.prototype.once=function(t,e){var i=this;return this.on(t,function n(){i.off(t,n),e.apply(null,arguments)})},G.prototype.off=function(t,e){if(this._isDestroyed)return this;for(var i=this._events[t]||[],n=i.length;n--;)e===i[n]&&i.splice(n,1);return this},G.prototype.emit=function(t,e,i,n){if(this._isDestroyed)return this;var r,s=this._events[t]||[],o=s.length,a=arguments.length-1;if(o)for(s=s.concat(),r=0;r<o;r++)0===a?s[r]():1===a?s[r](e):2===a?s[r](e,i):s[r](e,i,n);return this},G.prototype.destroy=function(){if(this._isDestroyed)return this;var t,e=a.keys(this._events);for(t=0;t<e.length;t++)this._events[e[t]]=null;return this._isDestroyed=!0,this},z.prototype.start=function(t,e,i){var n=this;if(!n._isDestroyed){var r=i||{},o=s(r.onFinish)===m?r.onFinish:null;if(n._animation){if(!a.keys(e).some(function(t){return e[t]!==n._propsTo[t]}))return void(n._animation.onfinish=function(){n._animation=n._propsTo=null,o&&o()});n._animation.cancel()}n._propsTo=e,n._animation=n._element.animate([t,e],{duration:r.duration||300,easing:r.easing||"ease"}),n._animation.onfinish=function(){n._animation=n._propsTo=null,o&&o()},rt(n._element,e)}},z.prototype.stop=function(t){!this._isDestroyed&&this._animation&&(rt(this._element,t||nt(this._element,this._propsTo)),this._animation.cancel(),this._animation=this._propsTo=null)},z.prototype.isAnimating=function(){return!!this._animation},z.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._item=this._element=null,this._isDestroyed=!0)},F.prototype.destroy=function(){return this._isDestroyed||(this.stop(!0),this._isDestroyed=!0),this},F.prototype.getItem=function(){return C[this._itemId]||null},F.prototype.start=function(t,e,n){if(this._isDestroyed)return this;var r,o,a,h,l,u=this.getItem(),d=u._element,c=u.isVisible(),f=u.getGrid(),m=f._settings,g=t._settings,v=t._element,y=f._items.indexOf(u),w=(void 0===e?"undefined":s(e))===_?e:t._items.indexOf(t._getItem(e)),D=n||p;return null===w?this:(w=V(t._items,w,!0),(u.isPositioning()||this.isActive||u.isReleasing())&&(h=et(d,"x"),l=et(d,"y")),u.isPositioning()&&u._stopLayout(!0,{transform:it(h,l)}),this.isActive&&(h-=this.containerDiffX,l-=this.containerDiffY,this.stop(!0,{transform:it(h,l)})),u.isReleasing()&&(h-=u._release.containerDiffX,l-=u._release.containerDiffY,u._release.stop(!0,{transform:it(h,l)})),f._itemShowHandler.stop(u),f._itemHideHandler.stop(u),u._drag&&u._drag.destroy(),u._animate.destroy(),u._animateChild.destroy(),yt(u._visibilityQueue,!0,u),f._emit("beforeSend",{item:u,fromGrid:f,fromIndex:y,toGrid:t,toIndex:w}),t._emit("beforeReceive",{item:u,fromGrid:f,fromIndex:y,toGrid:t,toIndex:w}),ot(d,m.itemClass),ot(d,m.itemVisibleClass),ot(d,m.itemHiddenClass),st(d,g.itemClass),st(d,c?g.itemVisibleClass:g.itemHiddenClass),f._items.splice(y,1),Z(t._items,u,w),u._gridId=t._id,u._animate=new k.ItemAnimate(u,d),u._animateChild=new k.ItemAnimate(u,u._child),D!==(r=d.parentNode)&&(D.appendChild(d),o=ht(D,r,!0),h===i&&(h=et(d,"x"),l=et(d,"y")),rt(d,{transform:it(h+o.left,l+o.top)})),u._child.removeAttribute("style"),c?t._itemShowHandler.start(u,!0):t._itemHideHandler.start(u,!0),rt(d,{display:c?"block":"hidden"}),a=ht(D,v,!0),u._refreshDimensions()._refreshSortData(),u._drag=g.dragEnabled?new k.ItemDrag(u):null,this.isActive=!0,this.container=D,this.containerDiffX=a.left,this.containerDiffY=a.top,f._emit("send",{item:u,fromGrid:f,fromIndex:y,toGrid:t,toIndex:w}),t._emit("receive",{item:u,fromGrid:f,fromIndex:y,toGrid:t,toIndex:w}),this)},F.prototype.stop=function(t,e){if(this._isDestroyed||!this.isActive)return this;var i=this.getItem(),n=i._element,r=i.getGrid()._element;return this.container!==r&&(e||(e={transform:it(t?et(n,"x")-this.containerDiffX:i._left,t?et(n,"y")-this.containerDiffY:i._top)}),r.appendChild(n),rt(n,e)),this.isActive=!1,this.container=null,this.containerDiffX=0,this.containerDiffY=0,this},W.prototype.destroy=function(){return this._isDestroyed||(this.stop(!0),this._isDestroyed=!0),this},W.prototype.getItem=function(){return C[this._itemId]||null},W.prototype.reset=function(){if(this._isDestroyed)return this;var t=this.getItem();return this.isActive=!1,this.isPositioningStarted=!1,this.containerDiffX=0,this.containerDiffY=0,ot(t._element,t.getGrid()._settings.itemReleasingClass),this},W.prototype.start=function(){if(this._isDestroyed||this.isActive)return this;var t=this.getItem(),e=t.getGrid();return this.isActive=!0,st(t._element,e._settings.itemReleasingClass),e._emit("dragReleaseStart",t),t._layout(!1),this},W.prototype.stop=function(t,e){if(this._isDestroyed||!this.isActive)return this;var i=this.getItem(),n=i._element,r=i.getGrid(),s=r._element,o=this.containerDiffX,a=this.containerDiffY;return this.reset(),n.parentNode!==s&&(e||(e={transform:it(t?et(n,"x")-o:i._left,t?et(n,"y")-a:i._top)}),s.appendChild(n),rt(n,e)),t||r._emit("dragReleaseEnd",i),this},j.defaultStartPredicate=function(t,e,i){var n,r,s,a,h=t._element,u=t._drag._startPredicateData;if(u||(n=U(n=i||t._drag.getGrid()._settings.dragStartPredicate)?n:{},u=t._drag._startPredicateData={distance:l.abs(n.distance)||0,delay:l.max(n.delay,0)||0,handle:"string"==typeof n.handle&&n.handle}),e.isFinal)return r="a"===h.tagName.toLowerCase(),s=h.getAttribute("href"),a=h.getAttribute("target"),It(t),void(r&&s&&l.abs(e.deltaX)<2&&l.abs(e.deltaY)<2&&e.deltaTime<200&&(a&&"_self"!==a?o.open(s,a):o.location.href=s));if(!u.handleElement)if(u.handle){for(u.handleElement=(e.changedPointers[0]||{}).target;u.handleElement&&!P(u.handleElement,u.handle);)u.handleElement=u.handleElement!==h?u.handleElement.parentElement:null;if(!u.handleElement)return!1}else u.handleElement=h;return u.delay&&(u.event=e,u.delayTimer||(u.delayTimer=o.setTimeout(function(){u.delay=0,bt(t,u.event)&&(t._drag._resolveStartPredicate(u.event),It(t))},u.delay))),bt(t,e)},j.defaultSortPredicate=function(t){var e,i,n,r,s,o=t._drag,a=o._data,l=o.getGrid(),u=l._settings.dragSortPredicate||{},d=u.threshold||50,c=u.action||"move",f={width:t._width,height:t._height,left:a.elementClientX,top:a.elementClientY},p=function(t,e,i,n){var r,s,o,a=null,l=e._settings.dragSort,u=!0===l?[e]:l.call(e,t),d=-1;if(!h.isArray(u))return a;for(o=0;o<u.length;o++)(s=u[o])._isDestroyed||(s._refreshDimensions(),(r=pt(i,{width:s._width,height:s._height,left:s._left,top:s._top}))>n&&r>d&&(d=r,a=s));return a}(t,l,f,d),m=0,g=0,_=-1;if(!p)return!1;for(p===l?(f.left=a.gridX+t._margin.left,f.top=a.gridY+t._margin.top):(m=p._left+p._border.left,g=p._top+p._border.top),s=0;s<p._items.length;s++)(n=p._items[s])._isActive&&n!==t&&(i=!0,(r=pt(f,{width:n._width,height:n._height,left:n._left+n._margin.left+m,top:n._top+n._margin.top+g}))>_&&(e=s,_=r));return _<d&&t.getGrid()!==p&&(e=i?-1:0,_=1/0),_>=d&&{grid:p,index:e,action:c}},j.prototype.destroy=function(){return this._isDestroyed||(this.stop(),this._hammer.destroy(),this.getItem()._element.removeEventListener("dragstart",Dt,!1),this._isDestroyed=!0),this},j.prototype.getItem=function(){return C[this._itemId]||null},j.prototype.getGrid=function(){return T[this._gridId]||null},j.prototype.reset=function(){var t=this._data;return t.isActive=!1,t.container=null,t.containingBlock=null,t.startEvent=null,t.currentEvent=null,t.scrollers=[],t.left=0,t.top=0,t.gridX=0,t.gridY=0,t.elementClientX=0,t.elementClientY=0,t.containerDiffX=0,t.containerDiffY=0,this},j.prototype.bindScrollListeners=function(){var t,e=this.getGrid()._element,i=this._data.container,n=dt(this.getItem()._element);for(i!==e&&(n=function(t){var e,i=[],n=t.length;if(n)for(i[0]=t[0],e=1;e<n;e++)i.indexOf(t[e])<0&&i.push(t[e]);return i}(n.concat(e).concat(dt(e)))),t=0;t<n.length;t++)n[t].addEventListener("scroll",this._scrollListener);return this._data.scrollers=n,this},j.prototype.unbindScrollListeners=function(){var t,e=this._data,i=e.scrollers;for(t=0;t<i.length;t++)i[t].removeEventListener("scroll",this._scrollListener);return e.scrollers=[],this},j.prototype.checkOverlap=function(){var t,e,i,n,r,o,a=this.getItem(),h=this._sortPredicate(a,this._data.currentEvent);return U(h)&&s(h.index)===_?(o=(t=a.getGrid())!==(i=h.grid||t),e=t._items.indexOf(a),n=V(i._items,h.index,o),r="swap"===h.action?"swap":"move",o?(t._emit("beforeSend",{item:a,fromGrid:t,fromIndex:e,toGrid:i,toIndex:n}),i._emit("beforeReceive",{item:a,fromGrid:t,fromIndex:e,toGrid:i,toIndex:n}),a._gridId=i._id,this._isMigrating=a._gridId!==this._gridId,t._items.splice(e,1),Z(i._items,a,n),a._sortData=null,t._emit("send",{item:a,fromGrid:t,fromIndex:e,toGrid:i,toIndex:n}),i._emit("receive",{item:a,fromGrid:t,fromIndex:e,toGrid:i,toIndex:n}),t.layout(),i.layout()):e!==n&&(("swap"===r?q:B)(t._items,e,n),t._emit("move",{item:a,fromIndex:e,toIndex:n,action:r}),t.layout()),this):this},j.prototype.finishMigration=function(){var t,e,i,n=this.getItem(),r=n._release,s=n._element,o=n.getGrid(),a=o._element,h=o._settings,l=h.dragContainer||a,u=this.getGrid()._settings,d=s.parentNode;return this._isMigrating=!1,this.destroy(),n._animate.destroy(),n._animateChild.destroy(),ot(s,u.itemClass),ot(s,u.itemVisibleClass),ot(s,u.itemHiddenClass),st(s,h.itemClass),st(s,h.itemVisibleClass),n._animate=new k.ItemAnimate(n,s),n._animateChild=new k.ItemAnimate(n,n._child),l!==d&&(l.appendChild(s),i=ht(d,l,!0),t=et(s,"x")-i.left,e=et(s,"y")-i.top),n._refreshDimensions()._refreshSortData(),i=ht(l,a,!0),r.containerDiffX=i.left,r.containerDiffY=i.top,n._drag=h.dragEnabled?new k.ItemDrag(n):null,l!==d&&rt(s,{transform:it(t,e)}),n._child.removeAttribute("style"),o._itemShowHandler.start(n,!0),r.start(),this},j.prototype.cancelRafLoop=function(){var t=this.getItem()._id;return v.cancel(D,t),v.cancel(w,t),this},j.prototype.stop=function(){var t=this._data,e=this.getItem()._element,i=this.getGrid();return t.isActive?this._isMigrating?this.finishMigration(t.currentEvent):(this.cancelRafLoop(),this.unbindScrollListeners(),this._checkSortOverlap("cancel"),e.parentNode!==i._element&&(i._element.appendChild(e),rt(e,{transform:it(t.gridX,t.gridY)})),ot(e,i._settings.itemDraggingClass),this.reset(),this):this},j.prototype.onStart=function(t){var e=this.getItem();if(!e._isActive)return this;var i=e._element,n=this.getGrid(),r=n._settings,s=this._data,o=e._release,a=e._migrate,h=n._element,l=r.dragContainer||h,u=ut(l,!0),d=l!==h?ht(u,h):0,c=et(i,"x"),f=et(i,"y"),p=i.getBoundingClientRect();return e.isPositioning()&&e._stopLayout(!0,{transform:it(c,f)}),a.isActive&&(c-=a.containerDiffX,f-=a.containerDiffY,a.stop(!0,{transform:it(c,f)})),e.isReleasing()&&o.reset(),s.isActive=!0,s.startEvent=s.currentEvent=t,s.container=l,s.containingBlock=u,s.elementClientX=p.left,s.elementClientY=p.top,s.left=s.gridX=c,s.top=s.gridY=f,n._emit("dragInit",e,t),l!==h&&(s.containerDiffX=d.left,s.containerDiffY=d.top,i.parentNode===l?(s.gridX=c-s.containerDiffX,s.gridY=f-s.containerDiffY):(s.left=c+s.containerDiffX,s.top=f+s.containerDiffY,l.appendChild(i),rt(i,{transform:it(s.left,s.top)}))),st(i,r.itemDraggingClass),this.bindScrollListeners(),n._emit("dragStart",e,t),this},j.prototype.onMove=function(t){var e=this,i=e.getItem();if(!i._isActive)return e.stop();var n=i._element,r=e.getGrid(),s=r._settings,o=e._data,a=s.dragAxis,h=t.deltaX-o.currentEvent.deltaX,l=t.deltaY-o.currentEvent.deltaY;return v.add(w,i._id,function(){o.currentEvent=t,"y"!==a&&(o.left+=h,o.gridX+=h,o.elementClientX+=h),"x"!==a&&(o.top+=l,o.gridY+=l,o.elementClientY+=l),s.dragSort&&e._checkSortOverlap()},function(){rt(n,{transform:it(o.left,o.top)}),r._emit("dragMove",i,t)}),e},j.prototype.onScroll=function(t){var e,i,n,r,s=this,o=s.getItem(),a=o._element,h=s.getGrid(),l=h._settings,u=l.dragAxis,d=s._data,c=h._element;return v.add(D,o._id,function(){e=a.getBoundingClientRect(),i=d.elementClientX-e.left,n=d.elementClientY-e.top,d.container!==c&&(r=ht(d.containingBlock,c),d.containerDiffX=r.left,d.containerDiffY=r.top),"y"!==u&&(d.left+=i,d.gridX=d.left-d.containerDiffX),"x"!==u&&(d.top+=n,d.gridY=d.top-d.containerDiffY),l.dragSort&&s._checkSortOverlap()},function(){rt(a,{transform:it(d.left,d.top)}),h._emit("dragScroll",o,t)}),s},j.prototype.onEnd=function(t){var e=this.getItem(),i=e._element,n=this.getGrid(),r=n._settings,s=this._data,o=e._release;return e._isActive?(this.cancelRafLoop(),r.dragSort&&this._checkSortOverlap("finish"),this.unbindScrollListeners(),o.containerDiffX=s.containerDiffX,o.containerDiffY=s.containerDiffY,this.reset(),ot(i,r.itemDraggingClass),n._emit("dragEnd",e,t),this._isMigrating?this.finishMigration():o.start(),this):this.stop()},Et.getSlot=function(t,e,i,n,r,s){var o,a,h,l,u,d=[],c={left:null,top:null,width:i,height:n};for(l=0;l<e.length;l++)if(o=e[l],c.width<=o.width+.001&&c.height<=o.height+.001){c.left=o.left,c.top=o.top;break}for(null===c.left&&(c.left=r?0:t.width,c.top=r?t.height:0,s||(h=!0)),r&&c.top+c.height>t.height&&(c.left>0&&d.push({left:0,top:t.height,width:c.left,height:1/0}),c.left+c.width<t.width&&d.push({left:c.left+c.width,top:t.height,width:t.width-c.left-c.width,height:1/0}),t.height=c.top+c.height),!r&&c.left+c.width>t.width&&(c.top>0&&d.push({left:t.width,top:0,width:1/0,height:c.top}),c.top+c.height<t.height&&d.push({left:t.width,top:c.top+c.height,width:1/0,height:t.height-c.top-c.height}),t.width=c.left+c.width),l=s?0:h?e.length:l;l<e.length;l++)for(a=Et.splitRect(e[l],c),u=0;u<a.length;u++)(o=a[u]).width>.49&&o.height>.49&&(r&&o.top<t.height||!r&&o.left<t.width)&&d.push(o);return d.length&&(d=Et.purgeRects(d).sort(r?Et.sortRectsTopLeft:Et.sortRectsLeftTop)),[c,d]},Et.splitRect=function(t,e){var i=[];return Et.doRectsOverlap(t,e)?(t.left<e.left&&i.push({left:t.left,top:t.top,width:e.left-t.left,height:t.height}),t.left+t.width>e.left+e.width&&i.push({left:e.left+e.width,top:t.top,width:t.left+t.width-(e.left+e.width),height:t.height}),t.top<e.top&&i.push({left:t.left,top:t.top,width:t.width,height:e.top-t.top}),t.top+t.height>e.top+e.height&&i.push({left:t.left,top:e.top+e.height,width:t.width,height:t.top+t.height-(e.top+e.height)}),i):[{left:t.left,top:t.top,width:t.width,height:t.height}]},Et.doRectsOverlap=function(t,e){return!(t.left+t.width<=e.left||e.left+e.width<=t.left||t.top+t.height<=e.top||e.top+e.height<=t.top)},Et.isRectWithinRect=function(t,e){return t.left>=e.left&&t.top>=e.top&&t.left+t.width<=e.left+e.width&&t.top+t.height<=e.top+e.height},Et.purgeRects=function(t){for(var e,i,n,r=t.length;r--;)for(i=t[r],e=t.length;e--;)if(n=t[e],r!==e&&Et.isRectWithinRect(i,n)){t.splice(r,1);break}return t},Et.sortRectsTopLeft=function(t,e){return t.top-e.top||t.left-e.left},Et.sortRectsLeftTop=function(t,e){return t.left-e.left||t.top-e.top},k})}).call(this,i(2)(t))},function(t,e,i){var n,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(s,o,a,h){"use strict";var l,u=["","webkit","Moz","MS","ms","o"],d=o.createElement("div"),c="function",f=Math.round,p=Math.abs,m=Date.now;function g(t,e,i){return setTimeout(I(t,i),e)}function _(t,e,i){return!!Array.isArray(t)&&(v(t,i[e],i),!0)}function v(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==h)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function y(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=s.console&&(s.console.warn||s.console.log);return r&&r.call(s.console,n,i),t.apply(this,arguments)}}l="function"!=typeof Object.assign?function(t){if(t===h||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==h&&null!==n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}:Object.assign;var w=y(function(t,e,i){for(var n=Object.keys(e),r=0;r<n.length;)(!i||i&&t[n[r]]===h)&&(t[n[r]]=e[n[r]]),r++;return t},"extend","Use `assign`."),D=y(function(t,e){return w(t,e,!0)},"merge","Use `assign`.");function b(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&l(n,i)}function I(t,e){return function(){return t.apply(e,arguments)}}function E(t,e){return(void 0===t?"undefined":r(t))==c?t.apply(e&&e[0]||h,e):t}function S(t,e){return t===h?e:t}function T(t,e,i){v(P(e),function(e){t.addEventListener(e,i,!1)})}function C(t,e,i){v(P(e),function(e){t.removeEventListener(e,i,!1)})}function A(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function x(t,e){return t.indexOf(e)>-1}function P(t){return t.trim().split(/\s+/g)}function H(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function R(t){return Array.prototype.slice.call(t,0)}function O(t,e,i){for(var n=[],r=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];H(r,o)<0&&n.push(t[s]),r[s]=o,s++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function L(t,e){for(var i,n,r=e[0].toUpperCase()+e.slice(1),s=0;s<u.length;){if((n=(i=u[s])?i+r:e)in t)return n;s++}return h}var N=1;function X(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||s}var Y="ontouchstart"in s,k=L(s,"PointerEvent")!==h,M=Y&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),G=25,z=1,F=2,W=4,j=8,V=1,q=2,B=4,U=8,Q=16,$=q|B,Z=U|Q,J=$|Z,K=["x","y"],tt=["clientX","clientY"];function et(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){E(t.options.enable,[t])&&i.handler(e)},this.init()}function it(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,s=e&z&&n-r==0,o=e&(W|j)&&n-r==0;i.isFirst=!!s,i.isFinal=!!o,s&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=nt(e));r>1&&!i.firstMultiple?i.firstMultiple=nt(e):1===r&&(i.firstMultiple=!1);var s=i.firstInput,o=i.firstMultiple,a=o?o.center:s.center,l=e.center=rt(n);e.timeStamp=m(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=ht(a,l),e.distance=at(a,l),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};e.eventType!==z&&s.eventType!==W||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y});e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=ot(e.deltaX,e.deltaY);var u=st(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=p(u.x)>p(u.y)?u.x:u.y,e.scale=o?(d=o.pointers,c=n,at(c[0],c[1],tt)/at(d[0],d[1],tt)):1,e.rotation=o?function(t,e){return ht(e[1],e[0],tt)+ht(t[1],t[0],tt)}(o.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,r,s,o=t.lastInterval||e,a=e.timeStamp-o.timeStamp;if(e.eventType!=j&&(a>G||o.velocity===h)){var l=e.deltaX-o.deltaX,u=e.deltaY-o.deltaY,d=st(a,l,u);n=d.x,r=d.y,i=p(d.x)>p(d.y)?d.x:d.y,s=ot(l,u),t.lastInterval=e}else i=o.velocity,n=o.velocityX,r=o.velocityY,s=o.direction;e.velocity=i,e.velocityX=n,e.velocityY=r,e.direction=s}(i,e);var d,c;var f=t.element;A(e.srcEvent.target,f)&&(f=e.srcEvent.target);e.target=f}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function nt(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:f(t.pointers[i].clientX),clientY:f(t.pointers[i].clientY)},i++;return{timeStamp:m(),pointers:e,center:rt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function rt(t){var e=t.length;if(1===e)return{x:f(t[0].clientX),y:f(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:f(i/e),y:f(n/e)}}function st(t,e,i){return{x:e/t||0,y:i/t||0}}function ot(t,e){return t===e?V:p(t)>=p(e)?t<0?q:B:e<0?U:Q}function at(t,e,i){i||(i=K);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function ht(t,e,i){i||(i=K);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}et.prototype={handler:function(){},init:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(X(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(X(this.element),this.evWin,this.domHandler)}};var lt={mousedown:z,mousemove:F,mouseup:W},ut="mousedown",dt="mousemove mouseup";function ct(){this.evEl=ut,this.evWin=dt,this.pressed=!1,et.apply(this,arguments)}b(ct,et,{handler:function(t){var e=lt[t.type];e&z&&0===t.button&&(this.pressed=!0),e&F&&1!==t.which&&(e=W),this.pressed&&(e&W&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var ft={pointerdown:z,pointermove:F,pointerup:W,pointercancel:j,pointerout:j},pt={2:"touch",3:"pen",4:"mouse",5:"kinect"},mt="pointerdown",gt="pointermove pointerup pointercancel";function _t(){this.evEl=mt,this.evWin=gt,et.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}s.MSPointerEvent&&!s.PointerEvent&&(mt="MSPointerDown",gt="MSPointerMove MSPointerUp MSPointerCancel"),b(_t,et,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=ft[n],s=pt[t.pointerType]||t.pointerType,o="touch"==s,a=H(e,t.pointerId,"pointerId");r&z&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):r&(W|j)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var vt={touchstart:z,touchmove:F,touchend:W,touchcancel:j},yt="touchstart",wt="touchstart touchmove touchend touchcancel";function Dt(){this.evTarget=yt,this.evWin=wt,this.started=!1,et.apply(this,arguments)}b(Dt,et,{handler:function(t){var e=vt[t.type];if(e===z&&(this.started=!0),this.started){var i=function(t,e){var i=R(t.touches),n=R(t.changedTouches);e&(W|j)&&(i=O(i.concat(n),"identifier",!0));return[i,n]}.call(this,t,e);e&(W|j)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var bt={touchstart:z,touchmove:F,touchend:W,touchcancel:j},It="touchstart touchmove touchend touchcancel";function Et(){this.evTarget=It,this.targetIds={},et.apply(this,arguments)}b(Et,et,{handler:function(t){var e=bt[t.type],i=function(t,e){var i=R(t.touches),n=this.targetIds;if(e&(z|F)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,s,o=R(t.changedTouches),a=[],h=this.target;if(s=i.filter(function(t){return A(t.target,h)}),e===z)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;r=0;for(;r<o.length;)n[o[r].identifier]&&a.push(o[r]),e&(W|j)&&delete n[o[r].identifier],r++;if(!a.length)return;return[O(s.concat(a),"identifier",!0),a]}.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});var St=2500,Tt=25;function Ct(){et.apply(this,arguments);var t=I(this.handler,this);this.touch=new Et(this.manager,t),this.mouse=new ct(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function At(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)},St)}}b(Ct,et,{handler:function(t,e,i){var n="touch"==i.pointerType,r="mouse"==i.pointerType;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(t,e){t&z?(this.primaryTouch=e.changedPointers[0].identifier,At.call(this,e)):t&(W|j)&&At.call(this,e)}).call(this,e,i);else if(r&&function(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(e-r.x),o=Math.abs(i-r.y);if(s<=Tt&&o<=Tt)return!0}return!1}.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var xt=L(d.style,"touchAction"),Pt=xt!==h,Ht="auto",Rt="manipulation",Ot="none",Lt="pan-x",Nt="pan-y",Xt=function(){if(!Pt)return!1;var t={},e=s.CSS&&s.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){t[i]=!e||s.CSS.supports("touch-action",i)}),t}();function Yt(t,e){this.manager=t,this.set(e)}Yt.prototype={set:function(t){"compute"==t&&(t=this.compute()),Pt&&this.manager.element.style&&Xt[t]&&(this.manager.element.style[xt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return v(this.manager.recognizers,function(e){E(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(x(t,Ot))return Ot;var e=x(t,Lt),i=x(t,Nt);if(e&&i)return Ot;if(e||i)return e?Lt:Nt;if(x(t,Rt))return Rt;return Ht}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,r=x(n,Ot)&&!Xt[Ot],s=x(n,Nt)&&!Xt[Nt],o=x(n,Lt)&&!Xt[Lt];if(r){var a=1===t.pointers.length,h=t.distance<2,l=t.deltaTime<250;if(a&&h&&l)return}if(!o||!s)return r||s&&i&$||o&&i&Z?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var kt=1,Mt=2,Gt=4,zt=8,Ft=zt,Wt=16;function jt(t){this.options=l({},this.defaults,t||{}),this.id=N++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=kt,this.simultaneous={},this.requireFail=[]}function Vt(t){return t&Wt?"cancel":t&zt?"end":t&Gt?"move":t&Mt?"start":""}function qt(t){return t==Q?"down":t==U?"up":t==q?"left":t==B?"right":""}function Bt(t,e){var i=e.manager;return i?i.get(t):t}function Ut(){jt.apply(this,arguments)}function Qt(){Ut.apply(this,arguments),this.pX=null,this.pY=null}function $t(){Ut.apply(this,arguments)}function Zt(){jt.apply(this,arguments),this._timer=null,this._input=null}function Jt(){Ut.apply(this,arguments)}function Kt(){Ut.apply(this,arguments)}function te(){jt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ee(t,e){return(e=e||{}).recognizers=S(e.recognizers,ee.defaults.preset),new ie(t,e)}jt.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(_(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Bt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return _(t,"dropRecognizeWith",this)?this:(t=Bt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(_(t,"requireFailure",this))return this;var e=this.requireFail;return-1===H(e,t=Bt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(_(t,"dropRequireFailure",this))return this;t=Bt(t,this);var e=H(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<zt&&n(e.options.event+Vt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=zt&&n(e.options.event+Vt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|kt)))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!E(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Ft|Wt|32)&&(this.state=kt),this.state=this.process(e),this.state&(Mt|Gt|zt|Wt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},b(Ut,jt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(Mt|Gt),r=this.attrTest(t);return n&&(i&j||!r)?e|Wt:n||r?i&W?e|zt:e&Mt?e|Gt:Mt:32}}),b(Qt,Ut,{defaults:{event:"pan",threshold:10,pointers:1,direction:J},getTouchAction:function(){var t=this.options.direction,e=[];return t&$&&e.push(Nt),t&Z&&e.push(Lt),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(e.direction&$?(r=0===s?V:s<0?q:B,i=s!=this.pX,n=Math.abs(t.deltaX)):(r=0===o?V:o<0?U:Q,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return Ut.prototype.attrTest.call(this,t)&&(this.state&Mt||!(this.state&Mt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=qt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),b($t,Ut,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ot]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Mt)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),b(Zt,jt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ht]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(W|j)&&!r)this.reset();else if(t.eventType&z)this.reset(),this._timer=g(function(){this.state=Ft,this.tryEmit()},e.time,this);else if(t.eventType&W)return Ft;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Ft&&(t&&t.eventType&W?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=m(),this.manager.emit(this.options.event,this._input)))}}),b(Jt,Ut,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ot]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Mt)}}),b(Kt,Ut,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:$|Z,pointers:1},getTouchAction:function(){return Qt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&($|Z)?e=t.overallVelocity:i&$?e=t.overallVelocityX:i&Z&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&p(e)>this.options.velocity&&t.eventType&W},emit:function(t){var e=qt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),b(te,jt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Rt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&z&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=W)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||at(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&s?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=g(function(){this.state=Ft,this.tryEmit()},e.interval,this),Mt):Ft}return 32},failTimeout:function(){return this._timer=g(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ft&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ee.VERSION="2.0.7",ee.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Jt,{enable:!1}],[$t,{enable:!1},["rotate"]],[Kt,{direction:$}],[Qt,{direction:$},["swipe"]],[te],[te,{event:"doubletap",taps:2},["tap"]],[Zt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function ie(t,e){var i;this.options=l({},ee.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(k?_t:M?Et:Y?Ct:ct))(i,it),this.touchAction=new Yt(this,this.options.touchAction),ne(this,!0),v(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ne(t,e){var i,n=t.element;n.style&&(v(t.options.cssProps,function(r,s){i=L(n.style,s),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={}))}ie.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&Ft)&&(r=e.curRecognizer=null);for(var s=0;s<n.length;)i=n[s],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(Mt|Gt|zt)&&(r=e.curRecognizer=i),s++}},get:function(t){if(t instanceof jt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(_(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(_(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=H(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==h&&e!==h){var i=this.handlers;return v(P(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==h){var i=this.handlers;return v(P(t),function(t){e?i[t]&&i[t].splice(H(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=o.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&ne(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(ee,{INPUT_START:z,INPUT_MOVE:F,INPUT_END:W,INPUT_CANCEL:j,STATE_POSSIBLE:kt,STATE_BEGAN:Mt,STATE_CHANGED:Gt,STATE_ENDED:zt,STATE_RECOGNIZED:Ft,STATE_CANCELLED:Wt,STATE_FAILED:32,DIRECTION_NONE:V,DIRECTION_LEFT:q,DIRECTION_RIGHT:B,DIRECTION_UP:U,DIRECTION_DOWN:Q,DIRECTION_HORIZONTAL:$,DIRECTION_VERTICAL:Z,DIRECTION_ALL:J,Manager:ie,Input:et,TouchAction:Yt,TouchInput:Et,MouseInput:ct,PointerEventInput:_t,TouchMouseInput:Ct,SingleTouchInput:Dt,Recognizer:jt,AttrRecognizer:Ut,Tap:te,Pan:Qt,Swipe:Kt,Pinch:$t,Rotate:Jt,Press:Zt,on:T,off:C,each:v,merge:D,extend:w,assign:l,inherit:b,bindFn:I,prefixed:L}),(void 0!==s?s:"undefined"!=typeof self?self:{}).Hammer=ee,(n=function(){return ee}.call(e,i,e,t))===h||(t.exports=n)}(window,document)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";i.r(e);var n=i(0),r=i.n(n),s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._initialized=!1,this.TPL_ANSWER_CONTAINER="$pid-answer",this.TPL_CANDIDATES_CONTAINER="$pid-candidates",this.TPL_HIDDEN_INPUTS="$pid-hidden-inputs",this.TPL_CARD="$pid-card$item"}return s(t,[{key:"init",value:function(t){this.pid=t,this._initialized=!0}},{key:"stringify",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this._initialized)throw"Uninitialized IdManager";return null==e?t.replace("$pid",this.pid):t.replace("$pid",this.pid).replace("$item",e)}}]),t}()),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var h=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ipos=e,this.name=i,this.content=n,this.pos=this.ipos}return a(t,[{key:"get_id",value:function(){return o.stringify(o.TPL_CARD,this.ipos+"")}},{key:"toString",value:function(){return this.content}},{key:"build",value:function(){this.enumeration=document.createElement("span"),this.enumeration.innerHTML="",this.contentCard=document.createElement("span"),this.contentCard.innerHTML=this.content,this.card=document.createElement("div"),this.card.setAttribute("class","permutation-item");var t=document.createElement("div");t.setAttribute("class","permutation-item-content"),t.setAttribute("id",this.get_id()),t.appendChild(this.enumeration),t.appendChild(this.contentCard),this.card.appendChild(t),this.iposHiddenInput=document.createElement("input"),this.iposHiddenInput.setAttribute("type","hidden"),this.iposHiddenInput.setAttribute("name",this.name+"-ipos"),this.iposHiddenInput.setAttribute("value",this.ipos+""),this.posHiddenInput=document.createElement("input"),this.posHiddenInput.setAttribute("type","hidden"),this.posHiddenInput.setAttribute("name",this.name+"-pos"),this.posHiddenInput.setAttribute("value",this.pos+"")}},{key:"update_position",value:function(t){this.pos=t,this.posHiddenInput.setAttribute("value",this.pos+""),this.enumeration.innerHTML=t>0?t+". ":""}},{key:"get_card",value:function(){return this.card}},{key:"get_iposHiddenInput",value:function(){return this.iposHiddenInput}},{key:"get_posHiddenInput",value:function(){return this.posHiddenInput}},{key:"get_y",value:function(){return this.card.getBoundingClientRect().top}}]),t}(),l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var u=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var s=this;this.answerItems=new Set,this.candidateItems=new Set,this.itemsMap={};for(var o=0;o<n.length;o++)this.itemsMap[n[o].get_id()]=n[o],this.candidateItems.add(n[o]);this.columnGrids=[],this.generate_muuri(e,function(t){s.candidateItems.delete(t),s.answerItems.add(t);for(var e=s.get_sorted_items(s.answerItems),i=0;i<e.length;i++)e[i].update_position(i+1)}),this.generate_muuri(i,function(t){s.answerItems.delete(t),s.candidateItems.add(t);for(var e=s.get_sorted_items(s.answerItems),i=0;i<e.length;i++)e[i].update_position(i+1)}),this.boardGrid=new r.a(".permutation",{layoutDuration:400,layoutEasing:"ease",dragEnabled:!1,dragSortInterval:0,dragStartPredicate:{handle:".permutation-column-header"},dragReleaseDuration:400,dragReleaseEasing:"ease"})}return l(t,[{key:"get_sorted_items",value:function(t){var e=[],i=[];t.forEach(function(t){i.push([t.get_y(),t])}),i=i.sort(function(t,e){return t[0]>e[0]});for(var n=0;n<i.length;n++)e.push(i[n][1]);return e}},{key:"generate_muuri",value:function(t,e){var i=this,n=new r.a(t,{items:".permutation-item",layoutDuration:400,layoutEasing:"ease",dragEnabled:!0,dragSort:function(){return i.columnGrids},dragSortInterval:0,dragContainer:document.body,dragReleaseDuration:400,dragReleaseEasing:"ease"}).on("dragStart",function(t){t.getElement().style.width=t.getWidth()+"px",t.getElement().style.height=t.getHeight()+"px"}).on("dragReleaseEnd",function(t){t.getElement().style.width="",t.getElement().style.height="",i.columnGrids.forEach(function(t){t.refreshItems()}),null!=e&&e(i.itemsMap[t._child.getAttribute("id")])}).on("layoutStart",function(){i.boardGrid.refreshItems().layout()});i.columnGrids.push(n)}}]),t}();i.d(e,"generate_ui",function(){return d});function d(t,e,i){o.init(t);var n=document.getElementById(o.stringify(o.TPL_ANSWER_CONTAINER)),r=document.getElementById(o.stringify(o.TPL_CANDIDATES_CONTAINER)),s=document.getElementById(o.stringify(o.TPL_HIDDEN_INPUTS));if(null!=n&&null!=r&&null!=s){for(var a=n,l=r,d=s,c=[],f=0;f<e.length;f++){var p;(p=new h(-f-1,i[f],e[f])).build(),l.appendChild(p.get_card()),d.appendChild(p.get_iposHiddenInput()),d.appendChild(p.get_posHiddenInput()),c.push(p)}new u(a,l,c)}}}]);